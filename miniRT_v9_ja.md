[[miniRT]]

---
# miniRT

## 表紙

**miniRT** MiniLibXを使った私の最初のレイトレーサー

**概要:** このプロジェクトは、レイトレーシングの美しい世界への入門です。 完了すれば、シンプルなコンピュータ生成画像をレンダリングできるようになり、数学的な公式を実装することを二度と恐れなくなるでしょう。

**バージョン:** 9.0

---

## 目次

- I 導入 ... 2
- II 共通指示 ... 3
- III AI指示 ... 5
- IV 必須パート - miniRT ... 7
- V ボーナスパート ... 12
- VI 例 ... 14
- VII 提出とピア評価 ... 19

---

## 第I章：導入

3次元のコンピュータ生成画像をレンダリングする際には、2つの可能なアプローチがあります：その効率性からほぼすべてのグラフィックスエンジンで使用されている「**ラスタライゼーション**」と、「**レイトレーシング**」です。

「**レイトレーシング**」手法は、1968年に初めて開発されましたが（その後改良されてきました）、「**ラスタライゼーション**」手法よりも計算コストが高いままです。その結果、リアルタイムの使用例にはまだ完全には適応されていませんが、はるかに高い視覚的リアリズムを生み出します。

_図I.1: 上の写真はレイトレーシング技術でレンダリングされています。印象的でしょう？_

このような高品質なグラフィックスを生成し始める前に、基礎をマスターしなければなりません：miniRTは、Cで書かれ、ノーム準拠で、控えめながらも機能的な、あなたの最初のレイトレーサーです。

miniRTの主な目標は、数学者でなくても数学的または物理的な公式を実装できることを自分自身に証明することです。ここでは最も基本的なレイトレーシング機能のみを実装するので、落ち着いて、深呼吸して、**パニックにならないで！** このプロジェクトの後、学校で費やしている時間を正当化するための見栄えの良い画像を披露できるようになるでしょう。

---

## 第II章：共通指示

- あなたのプロジェクトはCで書かれなければなりません。
- あなたのプロジェクトはノームに従って書かれなければなりません。ボーナスファイル/関数がある場合、それらはノームチェックに含まれ、ノームエラーがあれば0点となります。
- あなたの関数は、未定義動作を除いて、予期せず終了してはなりません（セグメンテーションフォルト、バスエラー、ダブルフリーなど）。これが発生した場合、あなたのプロジェクトは機能していないとみなされ、評価中に0点を受けます。
- ヒープに割り当てられたすべてのメモリは、必要に応じて適切に解放されなければなりません。メモリリークは許容されません。
- 課題で必要とされる場合、ccを使用して-Wall、-Wextra、-Werrorフラグでソースファイルを必要な出力にコンパイルするMakefileを提出しなければなりません。さらに、あなたのMakefileは不必要な再リンクを行ってはなりません。
- あなたのMakefileには、少なくとも$(NAME)、all、clean、fclean、reのルールが含まれていなければなりません。
- プロジェクトのボーナスを提出するには、Makefileにbonusルールを含める必要があります。これにより、プロジェクトの主要部分で許可されていない様々なヘッダー、ライブラリ、または関数がすべて追加されます。ボーナスは、課題で別途指定されない限り、_bonus.{c/h}ファイルに配置されなければなりません。必須パートとボーナスパートの評価は別々に行われます。
- プロジェクトでlibftの使用が許可されている場合、そのソースと関連するMakefileをlibftフォルダにコピーしなければなりません。プロジェクトのMakefileは、そのMakefileを使用してライブラリをコンパイルし、その後プロジェクトをコンパイルしなければなりません。
- 提出や採点の必要はありませんが、プロジェクトのテストプログラムを作成することを推奨します。自分の作業や同期の作業を簡単にテストする機会を与えてくれます。これらのテストは、ディフェンス中に特に役立つでしょう。実際、ディフェンス中は、自分のテストや評価している同期のテストを自由に使用できます。
- 指定されたGitリポジトリに作業を提出してください。Gitリポジトリ内の作業のみが採点されます。Deepthoughtがあなたの作業を採点するよう割り当てられている場合、それはピア評価の後に行われます。Deepthoughtの採点中にあなたの作業のいずれかのセクションでエラーが発生した場合、評価は停止します。

---

## 第III章：AI指示

### ● コンテキスト

学習の過程で、AIは多くの異なるタスクを支援できます。AIツールの様々な機能と、それらがあなたの作業をどのようにサポートできるかを探求する時間を取ってください。ただし、常に注意を払い、結果を批判的に評価してアプローチしてください。コード、ドキュメント、アイデア、技術的な説明のいずれであっても、あなたの質問が適切に形成されていたか、生成されたコンテンツが正確であるかを完全に確信することはできません。あなたの同期は、間違いや盲点を避けるのに役立つ貴重なリソースです。

### ● 主なメッセージ

☛ 反復的または退屈なタスクを減らすためにAIを使用してください。

☛ 将来のキャリアに役立つプロンプティングスキル（コーディングと非コーディングの両方）を開発してください。

☛ 一般的なリスク、バイアス、倫理的問題をより良く予測し回避するために、AIシステムがどのように機能するかを学んでください。

☛ 同期と協力して、技術的スキルとパワースキルの両方を構築し続けてください。

☛ 完全に理解し、責任を取れるAI生成コンテンツのみを使用してください。

### ● 学習者のルール：

- AIツールを探求し、それらがどのように機能するかを理解する時間を取るべきです。そうすることで、倫理的に使用し、潜在的なバイアスを減らすことができます。
- プロンプトを書く前に問題について考えるべきです。これにより、正確な語彙を使用して、より明確で、より詳細で、より関連性の高いプロンプトを書くのに役立ちます。
- AIによって生成されたものを体系的にチェック、レビュー、質問、テストする習慣を身につけるべきです。
- 常にピアレビューを求めるべきです。自分の検証だけに頼らないでください。

### ● フェーズの成果：

- 汎用およびドメイン固有のプロンプティングスキルを開発する。
- AIツールの効果的な使用で生産性を向上させる。
- 計算的思考、問題解決、適応性、協力を強化し続ける。

### ● コメントと例：

- 試験、評価など、実際の理解を示さなければならない状況に定期的に遭遇します。準備をして、技術的スキルと対人スキルの両方を構築し続けてください。
- 同期と推論を説明し議論することで、理解のギャップが明らかになることがよくあります。ピアラーニングを優先してください。
- AIツールはあなたの特定のコンテキストを欠いていることが多く、一般的な回答を提供する傾向があります。あなたの環境を共有する同期は、より関連性が高く正確な洞察を提供できます。
- AIが最も可能性の高い答えを生成する傾向がある一方で、同期は代替の視点と貴重なニュアンスを提供できます。品質チェックポイントとして彼らに頼ってください。

**✓ 良い実践：** 私はAIに尋ねます：「ソート関数をどのようにテストしますか？」いくつかのアイデアをくれます。それらを試して、同期と結果をレビューします。一緒にアプローチを改善します。

**✗ 悪い実践：** 私はAIに関数全体を書くように頼み、プロジェクトにコピペします。ピア評価中、それが何をするか、なぜそうするかを説明できません。信頼性を失い、プロジェクトに失敗します。

**✓ 良い実践：** 私はパーサーの設計を助けるためにAIを使用します。その後、同期とロジックを確認します。2つのバグを発見し、一緒に書き直します。より良く、よりクリーンに、完全に理解されています。

**✗ 悪い実践：** 私はCopilotにプロジェクトの重要な部分のコードを生成させます。コンパイルは通りますが、パイプをどのように処理するかを説明できません。評価中、正当化できず、プロジェクトに失敗します。

---

## 第IV章：必須パート - miniRT

| 項目       | 内容                                                                                                                                                                                          |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| プログラム名   | miniRT                                                                                                                                                                                      |
| 提出ファイル   | すべてのファイル                                                                                                                                                                                    |
| Makefile | all, clean, fclean, re, bonus                                                                                                                                                               |
| 引数       | *.rt形式のシーン                                                                                                                                                                                  |
| 外部関数     | • open, close, read, write, printf, malloc, free, perror, strerror, exit. • 数学ライブラリのすべての関数。（manページ：man math.hまたはman 3 math。-lmフラグでコンパイルすることを忘れずに）。 • MinilibXライブラリのすべての関数。 • gettimeofday() |
| Libft許可  | はい                                                                                                                                                                                          |
| 説明       | あなたのプログラムの目標は、レイトレーシングプロトコルを使用して画像を生成することです。これらのコンピュータ生成画像は、それぞれシンプルな幾何学的オブジェクトによって定義され、独自の照明システムを持つ、特定の角度と位置から見たシーンを表します。                                                                  |

制約は以下の通りです：
- オペレーティングシステムで利用可能なバージョン、またはそのソースから、**miniLibX**ライブラリを使用しなければなりません。ソースで作業することを選択した場合、共通指示パートで上記に書かれたlibftと同じルールを適用する必要があります。    
- ウィンドウの管理は流動的でなければなりません：別のウィンドウへの切り替え、最小化など。
- 少なくとも3つのシンプルな幾何学的オブジェクトが必要です：**平面、球、円柱**。
- 該当する場合、すべての可能な交差とオブジェクトの内部は正しく処理されなければなりません。
- あなたのプログラムは、オブジェクトの固有のプロパティをリサイズできなければなりません：球の直径、円柱の幅と高さ。
- あなたのプログラムは、オブジェクト、ライト、カメラに平行移動と回転変換を適用できなければなりません（回転できない球とライトを除く）。

- ライト管理：スポットの明るさ、ハードシャドウ、環境光（オブジェクトは決して完全に暗闇になりません）。環境光と拡散光を実装しなければなりません。

- プログラムはウィンドウに画像を表示し、以下のルールを尊重します：    
    - **ESC**を押すと、ウィンドウを閉じてプログラムをきれいに終了しなければなりません。
    - ウィンドウフレームの赤い×をクリックすると、ウィンドウを閉じてプログラムをきれいに終了しなければなりません。
    - minilibXライブラリの**images**の使用を強く推奨します。
- あなたのプログラムは、**.rt**拡張子を持つシーン記述ファイルを最初の引数として受け取らなければなりません。
    - 各タイプの要素は、1つ以上の改行で区切ることができます。
    - 要素からの各タイプの情報は、1つ以上のスペースで区切ることができます。
    - 各タイプの要素は、ファイル内で任意の順序で設定できます。
    - 大文字で定義される要素は、シーン内で一度だけ宣言できます。
    - 各要素の最初の情報は、タイプ識別子（1文字または2文字で構成）であり、その後に以下のような厳密な順序で各オブジェクトのすべての固有情報が続きます：

**○ 環境光：**

```
A 0.2 255,255,255
```
- 識別子：**A**
- [0.0,1.0]の範囲の環境光比率：**0.2**
- [0-255]の範囲のR, G, B色：**255, 255, 255**

**○ カメラ：**

```
C -50.0,0,20 0,0,1 70
```
- 識別子：**C**
- 視点のx, y, z座標：**-50.0,0,20**
- 各x, y, z軸について[-1,1]の範囲の3D正規化方向ベクトル：**0.0,0.0,1.0**
- FOV：[0,180]の範囲の度数による水平視野角：**70**

**○ ライト：**

```
L -40.0,50.0,0.0 0.6 10,0,255
```
- 識別子：**L**
- ライトポイントのx, y, z座標：**-40.0,50.0,0.0**
- [0.0,1.0]の範囲のライト明るさ比率：**0.6**
- （必須パートでは未使用）[0-255]の範囲のR, G, B色：**10, 0, 255**

**○ 球：**

```
sp 0.0,0.0,20.6 12.6 10,0,255
```

- 識別子：**sp**
- 球の中心のx, y, z座標：**0.0,0.0,20.6**
- 球の直径：**12.6**
- [0-255]の範囲のR,G,B色：**10, 0, 255**

**○ 平面：**

```
pl 0.0,0.0,-10.0 0.0,1.0,0.0 0,0,225
```

- 識別子：**pl**
- 平面上の点のx, y, z座標：**0.0,0.0,-10.0**
- 各x, y, z軸について[-1,1]の範囲の3D正規化法線ベクトル：**0.0,1.0,0.0**
- [0-255]の範囲のR,G,B色：**0,0,225**

**○ 円柱：**

```
cy 50.0,0.0,20.6 0.0,0.0,1.0 14.2 21.42 10,0,255
```

- 識別子：**cy**
- 円柱の中心のx, y, z座標：**50.0,0.0,20.6**
- 各x, y, z軸について[-1,1]の範囲の円柱の軸の3D正規化ベクトル：**0.0,0.0,1.0**
- 円柱の直径：**14.2**
- 円柱の高さ：**21.42**
- [0,255]の範囲のR, G, B色：**10, 0, 255**
- 必須パートの最小限の.rtシーンの例：
    
```
A    0.2                                   255,255,255

C    -50,0,20        0,0,1       70
L    -40,0,30                    0.7       255,255,255

pl   0,0,0           0,1.0,0               255,0,225
sp   0,0,20                      20        255,0,0
cy   50.0,0.0,20.6   0,0,1.0     14.2 21.42 10,0,255
```

- ファイル内で何らかの設定ミスが発生した場合、プログラムは適切に終了し、「Error\n」の後にあなたが選んだ明示的なエラーメッセージを返さなければなりません。
- ディフェンスのために、作成する要素の制御を容易にするために、機能しているものに焦点を当てたシーンのセット全体を持っていることが理想的です。

---

## 第V章：ボーナスパート

レイトレーシング技術は、反射、透明度、屈折、より複雑なオブジェクト、ソフトシャドウ、コースティクス、グローバルイルミネーション、バンプマッピング、.objファイルレンダリングなど、さらに多くのものを処理できます。

しかし、miniRTプロジェクトでは、あなたの最初のレイトレーサーとCGIでの最初のステップのために、物事をシンプルに保ちたいと思います。

より大きなボーナスをやりたい場合は、この小さなものが完成して完全に機能した後、開発者人生の後半で新しいレイトレーサーを再コーディングすることを強くお勧めします。

_図V.1: スポット、宇宙のスカイボックス、バンプマッピングを施した光沢のある地球テクスチャの球_

> ⚠️ **ボーナスは、必須パートが完璧な場合にのみ評価されます。** 完璧とは、当然ながら完全である必要があり、間違った使用法などの厄介なミスの場合でも失敗しないことを意味します。つまり、採点中に必須パートがすべてのポイントを獲得しなかった場合、ボーナスは完全に無視されます。

**ボーナスリスト：**

- 完全なPhong反射モデルを達成するためにスペキュラ反射を追加する。
- 色の変化：チェッカーボードパターン。
- 色付きおよびマルチスポットライト。
- もう1つの二次曲面オブジェクト：円錐、双曲面、放物面など。
- バンプマップテクスチャを処理する。

> ℹ️ ボーナスパートを完了するために、他の関数を使用したり、シーン記述に機能を追加したりすることが許可されています。ただし、評価中にその使用が正当化される場合に限ります。また、ニーズに合わせて期待されるシーンファイル形式を変更することも許可されています。賢くなってください！

---

## 第VI章：例

_図VI.1: 球、1つのスポット、少しの輝き（オプション）。_

_図VI.2: 円柱、1つのスポット。_

_図VI.3: 円錐（オプション）、平面、1つのスポット。_

_図VI.4: すべてが少しずつ、2つの平面を含む。_

_図VI.5: 同じシーン、異なるカメラ。_

_図VI.6: 今回は影付き。_

_図VI.7: 複数のスポット付き。_

_図VI.8: そして最後に、複数のスポットと中央の光沢のあるチェッカー（オプション）球。_
